# DNS Failover –¥–ª—è Cloudflare

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è DNS –∑–∞–ø–∏—Å–µ–π –≤ Cloudflare –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –∏–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –ö–æ–≥–¥–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç DNS –∑–∞–ø–∏—Å—å –≤ Cloudflare –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π IP –∞–¥—Ä–µ—Å.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ (TCP/HTTP –ø—Ä–æ–≤–µ—Ä–∫–∏)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ Cloudflare API
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–æ—Ä–æ–≥–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ DNS –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.7 –∏–ª–∏ –Ω–æ–≤–µ–µ**

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config.yaml`:**

   - **Cloudflare API Token:** –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
     - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "My Profile" ‚Üí "API Tokens" ‚Üí "Create Token"
     - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–±–ª–æ–Ω "Custom token"
     - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è: Zone:Read, DNS:Edit
     - –†–µ—Å—É—Ä—Å—ã: Include - Specific zone - –≤–∞—à –¥–æ–º–µ–Ω

   - **Zone ID:** –ù–∞–π–¥–∏—Ç–µ –≤ –æ–±–∑–æ—Ä–µ –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞ –≤ Cloudflare Dashboard

   - **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ IP –∞–¥—Ä–µ—Å–∞ –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤**

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.yaml`:

```yaml
cloudflare:
  api_token: "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_cloudflare"
  zone_id: "–≤–∞—à_zone_id"
  domain_name: "–≤–∞—à_–¥–æ–º–µ–Ω.com"

servers:
  primary:
    ip: "192.168.1.100"    # IP –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
    port: 80
    priority: 1            # –ù–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

  secondary:
    ip: "192.168.1.101"    # IP –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞  
    port: 80
    priority: 2

monitoring:
  check_interval: 60       # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  timeout: 10             # –¢–∞–π–º-–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
  failure_threshold: 3    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
  check_method: "tcp"     # –ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏: "tcp" –∏–ª–∏ "http"
  status_interval: 5      # –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```bash
python main.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python main.py --test
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
```bash
python main.py --status
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python main.py --config /path/to/config.yaml
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `test.py`:

```bash
python test.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã:

#### üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
‚ö†Ô∏è  –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–≥—É—Ç –Ω–∞–≥—Ä—É–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—ã
```

#### üåê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Cloudflare API
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Cloudflare API
- –í–∞–ª–∏–¥–∞—Ü–∏—è API —Ç–æ–∫–µ–Ω–∞ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π DNS –∑–∞–ø–∏—Å–∏

```
üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Cloudflare API...
‚úÖ Cloudflare API —Ä–∞–±–æ—Ç–∞–µ—Ç
   –¢–µ–∫—É—â–∞—è DNS –∑–∞–ø–∏—Å—å: example.com -> 192.168.1.100
   TTL: 300 —Å–µ–∫—É–Ω–¥
```

#### üñ•Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- TCP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
- HTTP –ø—Ä–æ–≤–µ—Ä–∫–∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
- –û—Ç—á–µ—Ç –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–µ—Ä—É

```
üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º...

   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ primary (192.168.1.100:80)...
   ‚úÖ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: OK

   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ secondary (192.168.1.101:80)...
   ‚úÖ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: OK
```

#### üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DNS –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–µ—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è DNS (dry run –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –†–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º (—Å —Ñ–ª–∞–≥–æ–º `--real-test`)

```
üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS (DRY RUN)...
   –¢–µ–∫—É—â–∏–π IP: 192.168.1.100
   ‚úÖ DNS –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ (—Ç–µ—Å—Ç–æ–≤—ã–π IP: 192.168.1.101)
   üí° –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º --real-test
```

### –†–µ–∂–∏–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```bash
python test.py
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è DNS –∑–∞–ø–∏—Å–µ–π.

#### –†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DNS
```bash
python test.py --real-test
```
‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –í—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è–µ—Ç DNS –∑–∞–ø–∏—Å—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∑–∞—Ç–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç.

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
```bash
python test.py --config –¥—Ä—É–≥–æ–π_config.yaml
```

### –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç:

```
==================================================
üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
==================================================
‚úÖ Cloudflare API: OK
–°–µ—Ä–≤–µ—Ä—ã:
  ‚úÖ primary: OK
  ‚úÖ secondary: OK
  ‚ùå backup: FAILED
‚úÖ DNS –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: OK

üéâ –û–ë–©–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢: –ï–°–¢–¨ –ü–†–û–ë–õ–ï–ú–´
‚ùå –ò—Å–ø—Ä–∞–≤—å—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–∞
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å test.py

- **–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ü–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º**: –ù–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- **–ü–ª–∞–Ω–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**: –†–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

#### ‚ùå "DNS –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
```bash
python test.py --config config.yaml
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `domain_name` –∏ `zone_id` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

#### ‚ùå "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Cloudflare"
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API —Ç–æ–∫–µ–Ω–∞
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ (Zone:Read, DNS:Edit)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

#### ‚ùå "–°–µ—Ä–≤–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- IP –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ü–æ—Ä—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Ç–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã DNS –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `dns_verify.py`:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è DNS
```bash
python dns_verify.py --check-only
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ IP –∞–¥—Ä–µ—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞:
```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –¥–ª—è example.com...
   üìç –õ–æ–∫–∞–ª—å–Ω—ã–π DNS: 192.168.1.100
   üåê Google DNS (8.8.8.8): 192.168.1.100
   üåê Cloudflare DNS (1.1.1.1): 192.168.1.100
   üåê OpenDNS (208.67.222.222): 192.168.1.100
   üåê Quad9 (9.9.9.9): 192.168.1.100
   üîó Google DNS API: 192.168.1.100
   üîó Cloudflare DNS API: 192.168.1.100
```

### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º DNS
```bash
python dns_verify.py
```

–≠—Ç–æ—Ç —Ç–µ—Å—Ç:
1. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é DNS –∑–∞–ø–∏—Å—å
2. ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç DNS –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π IP –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã
4. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é DNS –∑–∞–ø–∏—Å—å
5. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è DNS —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
============================================================
üéØ –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –¥–æ–º–µ–Ω: example.com
üìç –ò—Å—Ö–æ–¥–Ω—ã–π IP: 192.168.1.100
üîÑ –¢–µ—Å—Ç–æ–≤—ã–π IP: 192.168.1.101 (—Å–µ—Ä–≤–µ—Ä: secondary)

üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞ 192.168.1.101...
‚úÖ DNS –∑–∞–ø–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∞ –≤ Cloudflare
‚úÖ Cloudflare API –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ: 192.168.1.101

‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS –∏–∑–º–µ–Ω–µ–Ω–∏–π...
üìä –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –Ω–∞ 6/7 —Å–µ—Ä–≤–µ—Ä–∞—Ö
‚úÖ DNS –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª–∏—Å—å –∑–∞ 45 —Å–µ–∫—É–Ω–¥!

üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–π DNS –∑–∞–ø–∏—Å–∏...
‚úÖ DNS –∑–∞–ø–∏—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
============================================================
üéâ –¢–ï–°–¢ –£–°–ü–ï–®–ï–ù! DNS –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
```bash
python dns_verify.py --check-only --domain example.com
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python dns_verify.py --config –¥—Ä—É–≥–æ–π_config.yaml
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç dns_verify.py

- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã**: Google DNS, Cloudflare DNS, OpenDNS, Quad9
- **DNS API**: Google DNS API –∏ Cloudflare DNS API
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∑–æ–ª–≤–µ—Ä**: –°–∏—Å—Ç–µ–º–Ω—ã–π DNS —Ä–µ–∑–æ–ª–≤–µ—Ä
- **–í—Ä–µ–º—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è
- **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é

–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è:
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS failover
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å DNS
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –§–∞–π–ª `dns_failover.log` –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR)

## –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä (priority: 1) –¥–æ—Å—Ç—É–ø–µ–Ω
2. DNS –∑–∞–ø–∏—Å—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π IP
3. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤
1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º
2. –ü–æ—Å–ª–µ 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (failure_threshold)
3. DNS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π IP
4. –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)
3. DNS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π IP

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API —Ç–æ–∫–µ–Ω Cloudflare —Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç–æ–∫–µ–Ω–∞
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "DNS –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∑–æ–Ω–µ Cloudflare
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å zone_id –∏ domain_name

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å API —Ç–æ–∫–µ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–µ—Ä–≤–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å check_method —Å "tcp" –Ω–∞ "http"

### –ü—Ä–æ–±–ª–µ–º–∞: "DNS –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è"
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python dns_verify.py` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TTL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 300 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ –º–µ–Ω—å—à–µ)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ CDN –∏–ª–∏ –ø—Ä–æ–∫—Å–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –≤ –ª–æ–≥ —Ñ–∞–π–ª –∏ –∫–æ–Ω—Å–æ–ª—å —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `monitoring.status_interval`):

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ:

```yaml
monitoring:
  status_interval: 10    # –í—ã–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `1` - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- `5` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç) 
- `15` - –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)
- `60` - –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–∞–∂–¥—ã–π —á–∞—Å)

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞
```
DNS Failover Status - 2024-10-02T15:30:00
============================================================
–ê–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: primary

–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤:
  ‚úÖ primary [–ê–ö–¢–ò–í–ù–´–ô]
     IP: 192.168.1.100:80
     –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 1
     –û—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥: 0

  ‚úÖ secondary
     IP: 192.168.1.101:80
     –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 2
     –û—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥: 0
============================================================
```

## –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

### Windows (Task Scheduler)
1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π"
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
3. –£–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `python C:\path\to\main.py`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã

### Linux (systemd)
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/dns-failover.service`:
```ini
[Unit]
Description=DNS Failover Service
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/path/to/dns-api
ExecStart=/usr/bin/python3 /path/to/dns-api/main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å:
```bash
sudo systemctl enable dns-failover.service
sudo systemctl start dns-failover.service
```